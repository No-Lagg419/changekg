-- LocalScript inside StarterPlayerScripts or StarterGui

-- Main GUI
local Player = game.Players.LocalPlayer
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "ChangePetKGGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = Player:WaitForChild("PlayerGui")

-- Main Frame
local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 320, 0, 260)
Frame.Position = UDim2.new(0.5, -160, 0.5, -130)
Frame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

-- UI Stroke (border)
local Stroke = Instance.new("UIStroke")
Stroke.Thickness = 1.5
Stroke.Color = Color3.fromRGB(80, 80, 80)
Stroke.Parent = Frame

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, 0, 0, 40)
Title.BackgroundTransparency = 1
Title.Text = "CHANGE PET KG"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.Parent = Frame

-- Function to create label + textbox
local function CreateInput(yPos, labelText)
    local Label = Instance.new("TextLabel")
    Label.Position = UDim2.new(0, 10, 0, yPos)
    Label.Size = UDim2.new(0, 300, 0, 20)
    Label.BackgroundTransparency = 1
    Label.Text = labelText
    Label.TextColor3 = Color3.fromRGB(255, 255, 255)
    Label.Font = Enum.Font.Gotham
    Label.TextSize = 16
    Label.TextXAlignment = Enum.TextXAlignment.Left
    Label.Parent = Frame

    local TextBox = Instance.new("TextBox")
    TextBox.Position = UDim2.new(0, 10, 0, yPos + 22)
    TextBox.Size = UDim2.new(0, 300, 0, 25)
    TextBox.BackgroundTransparency = 0.2
    TextBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
    TextBox.Font = Enum.Font.Gotham
    TextBox.TextSize = 16
    TextBox.ClearTextOnFocus = false
    TextBox.PlaceholderText = "Type here..."
    TextBox.Parent = Frame

    local boxStroke = Instance.new("UIStroke")
    boxStroke.Thickness = 1
    boxStroke.Color = Color3.fromRGB(80, 80, 80)
    boxStroke.Parent = TextBox

    return TextBox
end

local PetNameBox = CreateInput(50, "Pet Name:")
local OldKGBox = CreateInput(100, "Old KG:")
local NewKGBox = CreateInput(150, "New KG:")

-- Change button
local ChangeBtn = Instance.new("TextButton")
ChangeBtn.Size = UDim2.new(0, 300, 0, 30)
ChangeBtn.Position = UDim2.new(0, 10, 0, 200)
ChangeBtn.BackgroundColor3 = Color3.fromRGB(60, 120, 255)
ChangeBtn.Text = "Change KG"
ChangeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
ChangeBtn.Font = Enum.Font.GothamBold
ChangeBtn.TextSize = 16
ChangeBtn.Parent = Frame

-- Loading label
local LoadingLabel = Instance.new("TextLabel")
LoadingLabel.Size = UDim2.new(1, 0, 0, 25)
LoadingLabel.Position = UDim2.new(0, 0, 1, 8)
LoadingLabel.BackgroundTransparency = 1
LoadingLabel.Text = ""
LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
LoadingLabel.Font = Enum.Font.Gotham
LoadingLabel.TextSize = 14
LoadingLabel.TextXAlignment = Enum.TextXAlignment.Center
LoadingLabel.TextYAlignment = Enum.TextYAlignment.Center
LoadingLabel.Parent = Frame

-- Tween service
local TweenService = game:GetService("TweenService")

-- Loading animation with progress bar + success fade
local function ShowLoading()
    -- Progress bar background
    local ProgressBarBG = Instance.new("Frame")
    ProgressBarBG.Size = UDim2.new(0, 300, 0, 6)
    ProgressBarBG.Position = UDim2.new(0, 10, 0, 235)
    ProgressBarBG.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
    ProgressBarBG.BorderSizePixel = 0
    ProgressBarBG.Parent = Frame

    local ProgressFill = Instance.new("Frame")
    ProgressFill.Size = UDim2.new(0, 0, 1, 0)
    ProgressFill.BackgroundColor3 = Color3.fromRGB(255, 200, 0)
    ProgressFill.BorderSizePixel = 0
    ProgressFill.Parent = ProgressBarBG

    local info = TweenInfo.new(2.4, Enum.EasingStyle.Linear)

    -- Animate fill bar
    TweenService:Create(ProgressFill, info, { Size = UDim2.new(1, 0, 1, 0) }):Play()

    -- Animate dots during progress
    local counter = 0
    while counter < 6 do
        local dots = string.rep(".", (counter % 3) + 1)
        LoadingLabel.Text = "Changing KG" .. dots
        LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
        LoadingLabel.Font = Enum.Font.Gotham
        LoadingLabel.TextSize = 14
        LoadingLabel.TextTransparency = 0
        counter += 1
        task.wait(0.4)
    end

    -- Success state (bigger, bold, green, fade in/out)
    ProgressFill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
    LoadingLabel.Text = "KG Changed"
    LoadingLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    LoadingLabel.Font = Enum.Font.GothamBold
    LoadingLabel.TextSize = 18
    LoadingLabel.TextTransparency = 1

    -- Fade in
    TweenService:Create(LoadingLabel, TweenInfo.new(0.4), {TextTransparency = 0}):Play()
    task.wait(1)
    -- Fade out
    TweenService:Create(LoadingLabel, TweenInfo.new(0.4), {TextTransparency = 1}):Play()
    task.wait(0.4)

    -- Reset
    LoadingLabel.Text = ""
    LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    LoadingLabel.Font = Enum.Font.Gotham
    LoadingLabel.TextSize = 14
    ProgressBarBG:Destroy()
end

-- Button click
ChangeBtn.MouseButton1Click:Connect(function()
    if PetNameBox.Text ~= "" and OldKGBox.Text ~= "" and NewKGBox.Text ~= "" then
        task.spawn(ShowLoading)
        print("Pet Name:", PetNameBox.Text)
        print("Old KG:", OldKGBox.Text)
        print("New KG:", NewKGBox.Text)
    else
        LoadingLabel.Text = "Please fill all fields!"
        LoadingLabel.TextColor3 = Color3.fromRGB(255, 50, 50)
        task.wait(1.2)
        LoadingLabel.Text = ""
        LoadingLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    end
end)
